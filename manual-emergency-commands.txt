EMERGENCY CRICKET SCORER RECOVERY COMMANDS
Execute these commands on your production server (67.227.251.94):

=== STEP 1: Diagnose Current State ===
sudo -u cricket-scorer pm2 status
ps aux | grep -E "(node|cricket)" | grep -v grep
netstat -tlnp | grep :3000
systemctl status nginx --no-pager
tail -20 /var/log/nginx/error.log

=== STEP 2: Stop All Processes ===
sudo -u cricket-scorer pm2 stop all
sudo -u cricket-scorer pm2 delete all

=== STEP 3: Emergency Rebuild ===
cd /opt/cricket-scorer

# Build server
sudo -u cricket-scorer npx esbuild server/index.ts --bundle --platform=node --target=node20 --outfile=dist/index.js --packages=external --format=esm

# Build client to correct location (server/public/ where Express expects it)
sudo -u cricket-scorer NODE_ENV=production npx vite build --outDir server/public --emptyOutDir

=== STEP 4: Verify Builds ===
ls -la /opt/cricket-scorer/dist/index.js
ls -la /opt/cricket-scorer/server/public/index.html
ls -la /opt/cricket-scorer/server/public/assets/

=== STEP 5: Set Permissions ===
chown -R cricket-scorer:cricket-scorer /opt/cricket-scorer/dist/
chown -R cricket-scorer:cricket-scorer /opt/cricket-scorer/server/public/
chmod -R 755 /opt/cricket-scorer/dist/
chmod -R 755 /opt/cricket-scorer/server/public/

=== STEP 6: Start Application ===
cd /opt/cricket-scorer
sudo -u cricket-scorer pm2 start ecosystem.config.cjs

=== STEP 7: Test and Restart Services ===
sleep 5
curl -I http://localhost:3000/
sudo -u cricket-scorer pm2 status
systemctl restart nginx

=== STEP 8: Final Verification ===
curl -I https://score.ramisetty.net/
curl -I https://score.ramisetty.net/assets/index-BdSldNSL.css

=== CRITICAL ISSUE IDENTIFIED ===
The Express server expects static files in server/public/ but previous builds
were putting them in dist/public/. This causes all 404 errors.

The commands above build directly to server/public/ to fix this mismatch.